(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["GoodsList"],{"057f":function(t,e,r){var a=r("fc6a"),n=r("241c").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return n(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?s(t):n(a(t))}},"25f0":function(t,e,r){"use strict";var a=r("6eeb"),n=r("825a"),o=r("d039"),i=r("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=s;(u||d)&&a(RegExp.prototype,s,(function(){var t=n(this),e=String(t.source),r=t.flags,a=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?i.call(t):r);return"/"+e+"/"+a}),{unsafe:!0})},2909:function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function n(t){if(Array.isArray(t))return a(t)}r.d(e,"a",(function(){return c}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}r("fb6a"),r("b0c0"),r("25f0");function i(t,e){if(t){if("string"===typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||o(t)||i(t)||s()}},"3ca3":function(t,e,r){"use strict";var a=r("6547").charAt,n=r("69f3"),o=r("7dd0"),i="String Iterator",s=n.set,c=n.getterFor(i);o(String,"String",(function(t){s(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=a(r,n),e.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,e,r){"use strict";var a=r("0366"),n=r("7b0b"),o=r("9bdd"),i=r("e95a"),s=r("50c4"),c=r("8418"),l=r("35a1");t.exports=function(t){var e,r,u,d,f,p,m=n(t),b="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,v=void 0!==h,y=l(m),_=0;if(v&&(h=a(h,g>2?arguments[2]:void 0,2)),void 0==y||b==Array&&i(y))for(e=s(m.length),r=new b(e);e>_;_++)p=v?h(m[_],_):m[_],c(r,_,p);else for(d=y.call(m),f=d.next,r=new b;!(u=f.call(d)).done;_++)p=v?o(d,h,[u.value,_],!0):u.value,c(r,_,p);return r.length=_,r}},5073:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("编辑商品")])],1),r("el-card",{staticClass:"box-card"},[r("el-alert",{attrs:{title:"编辑商品信息（请重新上传图片！）",type:"info","show-icon":"",closable:!1,center:""}}),r("el-steps",{attrs:{active:t.activeIndex-0,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"商品参数"}}),r("el-step",{attrs:{title:"商品属性"}}),r("el-step",{attrs:{title:"商品图片"}}),r("el-step",{attrs:{title:"商品内容"}}),r("el-step",{attrs:{title:"完成"}})],1),r("el-form",{ref:"editFormRef",staticClass:"demo-ruleForm",attrs:{model:t.editForm,rules:t.editFormRules,"label-width":"100px","label-position":"top"}},[r("el-tabs",{staticStyle:{height:"560px"},attrs:{"tab-position":t.tabPosition,"before-leave":t.handleLeave},on:{"tab-click":t.tabClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:t.editForm.goods_name,callback:function(e){t.$set(t.editForm,"goods_name",e)},expression:"editForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{attrs:{type:"number"},model:{value:t.editForm.goods_price,callback:function(e){t.$set(t.editForm,"goods_price",e)},expression:"editForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{attrs:{type:"number"},model:{value:t.editForm.goods_weight,callback:function(e){t.$set(t.editForm,"goods_weight",e)},expression:"editForm.goods_weight"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{attrs:{type:"number"},model:{value:t.editForm.goods_number,callback:function(e){t.$set(t.editForm,"goods_number",e)},expression:"editForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品分类"}},[r("el-cascader",{attrs:{options:t.cateList,props:t.cascaderProps},on:{change:t.handleChange},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyList,(function(e,a){return r("el-form-item",{key:a,attrs:{label:e.attr_name}},[r("el-checkbox-group",{model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return r("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),1),r("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyList,(function(e){return r("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[r("el-input",{attrs:{type:"text"},model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"item.attr_vals"}})],1)})),1),r("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[r("p",[t._v("先前上传的图片：")]),t.imgList!==[]?r("div",t._l(t.imgList,(function(t,e){return r("img",{key:e,staticClass:"existImg",attrs:{src:t,alt:"之前上传图片"}})})),0):r("p",[t._v("空")]),r("el-upload",{staticClass:"upload-demo",attrs:{action:"http://127.0.0.1:8888/api/private/v1/upload","on-preview":t.handlePreview,"on-remove":t.handleRemove,headers:t.uploadHeaders,"on-success":t.uploadSuccess,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),r("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[r("quill-editor",{model:{value:t.editForm.goods_introduce,callback:function(e){t.$set(t.editForm,"goods_introduce",e)},expression:"editForm.goods_introduce"}}),r("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:t.addGood}},[t._v("确定")])],1)],1)],1)],1),r("el-dialog",{attrs:{title:"图片预览",visible:t.previewVisible,width:"50%"},on:{"update:visible":function(e){t.previewVisible=e}}},[r("img",{staticClass:"imgSize",attrs:{src:t.previewImgUrl,alt:"图片预览"}})])],1)},n=[],o=(r("99af"),r("c740"),r("a15b"),r("d81d"),r("a434"),r("ac1f"),r("1276"),r("159b"),r("2909")),i=(r("96cf"),r("1da1")),s=r("5530"),c=r("2f62"),l={name:"GoodsAdd",created:function(){this.handleChange(this.selectedKeys),this.getCateList(),this.getGoodlist()},data:function(){return{tabPosition:"left",activeIndex:0,editForm:{},manyAttrs:[],onlyAttrs:[],editFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}]},selectedKeys:[],goodList:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},uploadHeaders:{Authorization:window.sessionStorage.getItem("token")},previewImgUrl:"",previewVisible:!1,cateList:[],updateGoodId:window.sessionStorage.getItem("updateGoodId"),imgList:[]}},methods:Object(s["a"])(Object(s["a"])({},Object(c["c"])(["getCateParamsVuex","handleChangeVuex"])),{},{getGoodlist:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("goods/".concat(t.updateGoodId));case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品信息失败"));case 6:t.editForm=a.data,t.selectedKeys=t.editForm.goods_cat.split(",").map((function(t){return parseInt(t)})),t.editForm.attrs.forEach((function(e){"many"===e.attr_sel?t.manyList.push(e):t.onlyList.push(e)})),t.manyList.map((function(t){t.attr_vals=t.attr_vals.split(" ")})),t.manyAttrs=t.setAttrs(t.manyList),t.onlyAttrs=t.setAttrs(t.onlyList),t.editForm.pics.forEach((function(e){t.imgList.push(e.pics_big_url)})),t.resetEditForm();case 14:case"end":return e.stop()}}),e)})))()},resetEditForm:function(){var t={};t.goods_name=this.editForm.goods_name,t.goods_price=this.editForm.goods_price,t.goods_number=this.editForm.goods_number,t.goods_weight=this.editForm.goods_weight,t.goods_introduce=this.editForm.goods_introduce,t.goods_cat=this.editForm.goods_cat,t.pics=[],t.attrs=[],this.editForm=t},getCateList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:{type:3}});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取分类列表数据失败"));case 6:t.cateList=a.data;case 7:case"end":return e.stop()}}),e)})))()},handleChange:function(){this.handleChangeVuex({selectedKeys:this.selectedKeys,stringFormat:!0}),3===this.selectedKeys.length&&(this.editForm.goods_cat=this.selectedKeys.join(","))},getCateParams:function(t){this.getCateParamsVuex(t)},handleLeave:function(t,e){if("0"===e&&3!==this.selectedKeys.length)return this.$message.error("请选择商品分类"),!1;"1"===e?this.manyAttrs=this.setAttrs(this.manyList):"2"===e&&(this.onlyAttrs=this.setAttrs(this.onlyList))},setAttrs:function(t){var e=this,r=[];return t.forEach((function(a){var n={};n.attr_id=a.attr_id,t!==e.onlyList?n.attr_value=a.attr_vals.join(" "):n.attr_value=a.attr_vals,r.push(n)})),r},tabClick:function(){},handlePreview:function(t){this.previewImgUrl=t.response.data.url,this.previewVisible=!0},handleRemove:function(t){var e=this.editForm.pics.findIndex((function(e){return e.pic===t.response.data.tmp_path}));this.editForm.pics.splice(e,1)},uploadSuccess:function(t){var e={pic:""};e.pic=t.data.tmp_path,this.editForm.pics.push(e)},addGood:function(){var t=this;this.$refs.editFormRef.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return t.editForm.attrs=[].concat(Object(o["a"])(t.manyAttrs),Object(o["a"])(t.onlyAttrs)),e.next=5,t.$http.put("goods/".concat(t.updateGoodId),t.editForm);case 5:if(a=e.sent,n=a.data,200===n.meta.status){e.next=9;break}return e.abrupt("return",t.$message.error("修改商品信息失败"));case 9:t.$message.success("修改商品信息成功"),t.$router.push("/goods");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),computed:Object(s["a"])(Object(s["a"])({},Object(c["d"])(["manyList","onlyList","selectedArray"])),Object(c["b"])(["cateId"]))},u=l,d=(r("993f"),r("2877")),f=Object(d["a"])(u,a,n,!1,null,"a0a8851c",null);e["default"]=f.exports},5374:function(t,e,r){},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b");function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"746f":function(t,e,r){var a=r("428f"),n=r("5135"),o=r("e538"),i=r("9bf2").f;t.exports=function(t){var e=a.Symbol||(a.Symbol={});n(e,t)||i(e,t,{value:o.f(t)})}},"984e":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("商品列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:10,type:"flex",justify:"center"}},[r("el-col",{attrs:{span:10}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:t.getGoodsList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getGoodsList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:t.gotoAddGoodsPage}},[t._v("添加商品")])],1)],1),r("el-table",{attrs:{border:"",stripe:"",data:t.goodsList}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{label:"商品",prop:"goods_name"}}),r("el-table-column",{attrs:{width:"110px",label:"商品价格(元)",prop:"goods_price"}}),r("el-table-column",{attrs:{width:"80px",label:"商品重量",prop:"goods_weight"}}),r("el-table-column",{attrs:{width:"160px",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.add_time))+" ")]}}])}),r("el-table-column",{attrs:{width:"150px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return t.gotoUpdateGoodsPage(e.row.goods_id)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return t.deleteGood(e.row.goods_id)}}})],1)]}}])},[t._v(" // eslint-disable-next-line vue/no-unused-vars ")])],1),r("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[8,10,15,20],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],o=(r("96cf"),r("1da1")),i={name:"GoodsList",created:function(){this.getGoodsList()},data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10},goodsList:[],total:0}},methods:{getGoodsList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("goods",{params:t.queryInfo});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$messzge.error("获取商品列表数据失败"));case 6:t.goodsList=a.data.goods,t.total=a.data.total;case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getGoodsList()},deleteGood:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("此操作将永久删除该商品数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",e.$message.info("已取消删除"));case 5:return r.next=7,e.$http.delete("goods/".concat(t));case 7:if(n=r.sent,o=n.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",e.$message.error("删除商品数据失败"));case 11:e.$message.success("删除商品数据成功"),e.getGoodsList();case 13:case"end":return r.stop()}}),r)})))()},gotoAddGoodsPage:function(){this.$router.push("/goods/add")},gotoUpdateGoodsPage:function(t){window.sessionStorage.setItem("updateGoodId",t),this.$router.push("/goods/update")}}},s=i,c=r("2877"),l=Object(c["a"])(s,a,n,!1,null,"4f0c7faf",null);e["default"]=l.exports},"993f":function(t,e,r){"use strict";r("f549")},"9bdd":function(t,e,r){var a=r("825a"),n=r("2a62");t.exports=function(t,e,r,o){try{return o?e(a(r)[0],r[1]):e(r)}catch(i){throw n(t),i}}},a15b:function(t,e,r){"use strict";var a=r("23e7"),n=r("44ad"),o=r("fc6a"),i=r("a640"),s=[].join,c=n!=Object,l=i("join",",");a({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},a434:function(t,e,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),i=r("50c4"),s=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=u("splice"),f=Math.max,p=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var r,a,u,d,g,h,v=s(this),y=i(v.length),_=n(t,y),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=y-_):(r=w-2,a=p(f(o(e),0),y-_)),y+r-a>m)throw TypeError(b);for(u=c(v,a),d=0;d<a;d++)g=_+d,g in v&&l(u,d,v[g]);if(u.length=a,r<a){for(d=_;d<y-a;d++)g=d+a,h=d+r,g in v?v[h]=v[g]:delete v[h];for(d=y;d>y-a+r;d--)delete v[d-1]}else if(r>a)for(d=y-a;d>_;d--)g=d+a-1,h=d+r-1,g in v?v[h]=v[g]:delete v[h];for(d=0;d<r;d++)v[d+_]=arguments[d+2];return v.length=y-a+r,u}})},a4d3:function(t,e,r){"use strict";var a=r("23e7"),n=r("da84"),o=r("d066"),i=r("c430"),s=r("83ab"),c=r("4930"),l=r("fdbf"),u=r("d039"),d=r("5135"),f=r("e8b5"),p=r("861d"),m=r("825a"),b=r("7b0b"),g=r("fc6a"),h=r("c04e"),v=r("5c6c"),y=r("7c73"),_=r("df75"),w=r("241c"),x=r("057f"),F=r("7418"),O=r("06cf"),k=r("9bf2"),j=r("d1e7"),S=r("9112"),A=r("6eeb"),L=r("5692"),I=r("f772"),$=r("d012"),C=r("90e3"),P=r("b622"),R=r("e538"),G=r("746f"),q=r("d44e"),K=r("69f3"),E=r("b727").forEach,z=I("hidden"),V="Symbol",T="prototype",U=P("toPrimitive"),D=K.set,M=K.getterFor(V),N=Object[T],H=n.Symbol,J=o("JSON","stringify"),B=O.f,Q=k.f,W=x.f,X=j.f,Y=L("symbols"),Z=L("op-symbols"),tt=L("string-to-symbol-registry"),et=L("symbol-to-string-registry"),rt=L("wks"),at=n.QObject,nt=!at||!at[T]||!at[T].findChild,ot=s&&u((function(){return 7!=y(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(t,e,r){var a=B(N,e);a&&delete N[e],Q(t,e,r),a&&t!==N&&Q(N,e,a)}:Q,it=function(t,e){var r=Y[t]=y(H[T]);return D(r,{type:V,tag:t,description:e}),s||(r.description=e),r},st=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},ct=function(t,e,r){t===N&&ct(Z,e,r),m(t);var a=h(e,!0);return m(r),d(Y,a)?(r.enumerable?(d(t,z)&&t[z][a]&&(t[z][a]=!1),r=y(r,{enumerable:v(0,!1)})):(d(t,z)||Q(t,z,v(1,{})),t[z][a]=!0),ot(t,a,r)):Q(t,a,r)},lt=function(t,e){m(t);var r=g(e),a=_(r).concat(mt(r));return E(a,(function(e){s&&!dt.call(r,e)||ct(t,e,r[e])})),t},ut=function(t,e){return void 0===e?y(t):lt(y(t),e)},dt=function(t){var e=h(t,!0),r=X.call(this,e);return!(this===N&&d(Y,e)&&!d(Z,e))&&(!(r||!d(this,e)||!d(Y,e)||d(this,z)&&this[z][e])||r)},ft=function(t,e){var r=g(t),a=h(e,!0);if(r!==N||!d(Y,a)||d(Z,a)){var n=B(r,a);return!n||!d(Y,a)||d(r,z)&&r[z][a]||(n.enumerable=!0),n}},pt=function(t){var e=W(g(t)),r=[];return E(e,(function(t){d(Y,t)||d($,t)||r.push(t)})),r},mt=function(t){var e=t===N,r=W(e?Z:g(t)),a=[];return E(r,(function(t){!d(Y,t)||e&&!d(N,t)||a.push(Y[t])})),a};if(c||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=C(t),r=function(t){this===N&&r.call(Z,t),d(this,z)&&d(this[z],e)&&(this[z][e]=!1),ot(this,e,v(1,t))};return s&&nt&&ot(N,e,{configurable:!0,set:r}),it(e,t)},A(H[T],"toString",(function(){return M(this).tag})),A(H,"withoutSetter",(function(t){return it(C(t),t)})),j.f=dt,k.f=ct,O.f=ft,w.f=x.f=pt,F.f=mt,R.f=function(t){return it(P(t),t)},s&&(Q(H[T],"description",{configurable:!0,get:function(){return M(this).description}}),i||A(N,"propertyIsEnumerable",dt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),E(_(rt),(function(t){G(t)})),a({target:V,stat:!0,forced:!c},{for:function(t){var e=String(t);if(d(tt,e))return tt[e];var r=H(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(d(et,t))return et[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),a({target:"Object",stat:!0,forced:!c,sham:!s},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:ft}),a({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pt,getOwnPropertySymbols:mt}),a({target:"Object",stat:!0,forced:u((function(){F.f(1)}))},{getOwnPropertySymbols:function(t){return F.f(b(t))}}),J){var bt=!c||u((function(){var t=H();return"[null]"!=J([t])||"{}"!=J({a:t})||"{}"!=J(Object(t))}));a({target:"JSON",stat:!0,forced:bt},{stringify:function(t,e,r){var a,n=[t],o=1;while(arguments.length>o)n.push(arguments[o++]);if(a=e,(p(e)||void 0!==t)&&!st(t))return f(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!st(e))return e}),n[1]=e,J.apply(null,n)}})}H[T][U]||S(H[T],U,H[T].valueOf),q(H,V),$[z]=!0},a630:function(t,e,r){var a=r("23e7"),n=r("4df4"),o=r("1c7e"),i=!o((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:i},{from:n})},b0c0:function(t,e,r){var a=r("83ab"),n=r("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,c="name";a&&!(c in o)&&n(o,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(t){return""}}})},b64b:function(t,e,r){var a=r("23e7"),n=r("7b0b"),o=r("df75"),i=r("d039"),s=i((function(){o(1)}));a({target:"Object",stat:!0,forced:s},{keys:function(t){return o(n(t))}})},c740:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").findIndex,o=r("44d2"),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},ceeb:function(t,e,r){"use strict";r("5374")},d28b:function(t,e,r){var a=r("746f");a("iterator")},d81d:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").map,o=r("1dde"),i=o("map");a({target:"Array",proto:!0,forced:!i},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,r){var a=r("23e7"),n=r("83ab"),o=r("56ef"),i=r("fc6a"),s=r("06cf"),c=r("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,r,a=i(t),n=s.f,l=o(a),u={},d=0;while(l.length>d)r=n(a,e=l[d++]),void 0!==r&&c(u,e,r);return u}})},ddb0:function(t,e,r){var a=r("da84"),n=r("fdbc"),o=r("e260"),i=r("9112"),s=r("b622"),c=s("iterator"),l=s("toStringTag"),u=o.values;for(var d in n){var f=a[d],p=f&&f.prototype;if(p){if(p[c]!==u)try{i(p,c,u)}catch(b){p[c]=u}if(p[l]||i(p,l,d),n[d])for(var m in o)if(p[m]!==o[m])try{i(p,m,o[m])}catch(b){p[m]=o[m]}}}},e01a:function(t,e,r){"use strict";var a=r("23e7"),n=r("83ab"),o=r("da84"),i=r("5135"),s=r("861d"),c=r("9bf2").f,l=r("e893"),u=o.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(f,u);var p=f.prototype=u.prototype;p.constructor=f;var m=p.toString,b="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=m.call(t);if(i(d,t))return"";var r=b?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:f})}},e439:function(t,e,r){var a=r("23e7"),n=r("d039"),o=r("fc6a"),i=r("06cf").f,s=r("83ab"),c=n((function(){i(1)})),l=!s||c;a({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(t,e){return i(o(t),e)}})},e538:function(t,e,r){var a=r("b622");e.f=a},e909:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("添加商品")])],1),r("el-card",{staticClass:"box-card"},[r("el-alert",{attrs:{title:"添加商品信息",type:"info","show-icon":"",closable:!1,center:""}}),r("el-steps",{attrs:{active:t.activeIndex-0,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"商品参数"}}),r("el-step",{attrs:{title:"商品属性"}}),r("el-step",{attrs:{title:"商品图片"}}),r("el-step",{attrs:{title:"商品内容"}}),r("el-step",{attrs:{title:"完成"}})],1),r("el-form",{ref:"addFormRef",staticClass:"demo-ruleForm",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"100px","label-position":"top"}},[r("el-tabs",{staticStyle:{height:"560px"},attrs:{"tab-position":t.tabPosition,"before-leave":t.handleLeave},on:{"tab-click":t.tabClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:t.addForm.goods_name,callback:function(e){t.$set(t.addForm,"goods_name",e)},expression:"addForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_price,callback:function(e){t.$set(t.addForm,"goods_price",e)},expression:"addForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_weight,callback:function(e){t.$set(t.addForm,"goods_weight",e)},expression:"addForm.goods_weight"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{attrs:{type:"number"},model:{value:t.addForm.goods_number,callback:function(e){t.$set(t.addForm,"goods_number",e)},expression:"addForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品分类"}},[r("el-cascader",{attrs:{options:t.cateList,props:t.cascaderProps},on:{change:t.handleChange},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(t.manyList,(function(e,a){return r("el-form-item",{key:a,attrs:{label:e.attr_name}},[r("el-checkbox-group",{model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return r("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),1),r("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(t.onlyList,(function(e){return r("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[r("el-input",{attrs:{type:"text"},model:{value:e.attr_vals,callback:function(r){t.$set(e,"attr_vals",r)},expression:"item.attr_vals"}})],1)})),1),r("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"http://127.0.0.1:8888/api/private/v1/upload","on-preview":t.handlePreview,"on-remove":t.handleRemove,headers:t.uploadHeaders,"on-success":t.uploadSuccess,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),r("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[r("quill-editor",{model:{value:t.addForm.goods_introduce,callback:function(e){t.$set(t.addForm,"goods_introduce",e)},expression:"addForm.goods_introduce"}}),r("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:t.addGood}},[t._v("添加")])],1)],1)],1)],1),r("el-dialog",{attrs:{title:"图片预览",visible:t.previewVisible,width:"50%"},on:{"update:visible":function(e){t.previewVisible=e}}},[r("img",{staticClass:"imgSize",attrs:{src:t.previewImgUrl,alt:"图片预览"}})])],1)},n=[],o=(r("99af"),r("c740"),r("a15b"),r("a434"),r("159b"),r("2909")),i=(r("96cf"),r("1da1")),s=r("5530"),c=r("2f62"),l={name:"GoodsAdd",created:function(){this.getCateList(),this.handleChange(this.selectedKeys)},data:function(){return{tabPosition:"left",activeIndex:0,addForm:{goods_name:"",goods_cat:"",goods_price:0,goods_weight:0,goods_number:0,goods_introduce:"",attrs:[],pics:[]},manyAttrs:[],onlyAttrs:[],addFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}]},selectedKeys:[],cateList:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},uploadHeaders:{Authorization:window.sessionStorage.getItem("token")},previewImgUrl:"",previewVisible:!1}},methods:Object(s["a"])(Object(s["a"])({},Object(c["c"])(["getCateParamsVuex","handleChangeVuex"])),{},{getCateList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:{type:3}});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取分类列表数据失败"));case 6:t.cateList=a.data;case 7:case"end":return e.stop()}}),e)})))()},handleChange:function(){this.handleChangeVuex({selectedKeys:this.selectedKeys,stringFormat:!0}),3===this.selectedKeys.length&&(this.addForm.goods_cat=this.selectedKeys.join(","))},getCateParams:function(t){this.getCateParamsVuex(t)},handleLeave:function(t,e){if("0"===e&&3!==this.selectedKeys.length)return this.$message.error("请选择商品分类"),!1;"1"===e?this.manyAttrs=this.setAttrs(this.manyList):"2"===e&&(this.onlyAttrs=this.setAttrs(this.onlyList))},setAttrs:function(t){var e=this,r=[];return t.forEach((function(a){var n={};n.attr_id=a.attr_id,t!==e.onlyList?n.attr_value=a.attr_vals.join(" "):n.attr_value=a.attr_vals,r.push(n)})),r},tabClick:function(){},handlePreview:function(t){this.previewImgUrl=t.response.data.url,this.previewVisible=!0},handleRemove:function(t){var e=this.addForm.pics.findIndex((function(e){return e.pic===t.response.data.tmp_path}));this.addForm.pics.splice(e,1)},uploadSuccess:function(t){var e={pic:""};e.pic=t.data.tmp_path,this.addForm.pics.push(e)},addGood:function(){var t=this;this.$refs.addFormRef.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return t.addForm.attrs=[].concat(Object(o["a"])(t.manyAttrs),Object(o["a"])(t.onlyAttrs)),e.next=5,t.$http.post("goods",t.addForm);case 5:if(a=e.sent,n=a.data,201===n.meta.status){e.next=9;break}return e.abrupt("return",t.$message.error("添加商品失败"));case 9:t.$message.success("添加商品成功"),t.$router.push("/goods");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),computed:Object(s["a"])(Object(s["a"])({},Object(c["d"])(["manyList","onlyList","selectedArray"])),Object(c["b"])(["cateId"]))},u=l,d=(r("ceeb"),r("2877")),f=Object(d["a"])(u,a,n,!1,null,"6c544ee2",null);e["default"]=f.exports},f549:function(t,e,r){},fb6a:function(t,e,r){"use strict";var a=r("23e7"),n=r("861d"),o=r("e8b5"),i=r("23cb"),s=r("50c4"),c=r("fc6a"),l=r("8418"),u=r("b622"),d=r("1dde"),f=d("slice"),p=u("species"),m=[].slice,b=Math.max;a({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var r,a,u,d=c(this),f=s(d.length),g=i(t,f),h=i(void 0===e?f:e,f);if(o(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?n(r)&&(r=r[p],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(d,g,h);for(a=new(void 0===r?Array:r)(b(h-g,0)),u=0;g<h;g++,u++)g in d&&l(a,u,d[g]);return a.length=u,a}})}}]);
//# sourceMappingURL=GoodsList.db0db5f0.js.map